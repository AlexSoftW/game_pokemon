<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/capturar.css">
    <title>Capturar</title>
</head>
<body onload="validar_getPokemon(), animation2()">
    <section class="main">
        <div class="group_container">
            <div class="container_1">
                <div class="map" id="map_capture">
                    <audio autoplay id="audio_battle">
                        <!-- <source src="assets/audio/Battle-Music-pt2.mp3" type="audio/mp3"> -->
                    </audio>
                    <div class="status" id="status_game">
                        <img src="../assets/icons/pixel_pokeball.jpg" class="img_pokeball">
                        <p id="p_pokemon"></p>
                        <img src="assets/maps/status.png">
                    </div>
                    <div class="base" id="base_game">
                        <img src="assets/maps/base.png">
                    </div>

                    <div class="animation">

                    </div>

                    <div id="treinador_game">
                        <!-- <img src="../assets/treinador/boy_game.png"> -->
                    </div>
                    <div id="pokemon_game">
                        <!-- <img src="assets/pokemon/Pikachu.gif"> -->
                    </div>
                    
                </div>
                <div class="log">
                    <img src="assets/log/padrao.png">
                </div>
            </div>
            <div class="container_2">
                <div class="bag">
                    <div class="item"></div>
                    <div class="item"></div>
                    <div class="item"></div>
                    <div class="item"></div>
                    <div class="item"></div>
                </div>
                <div class="sair">
                    <button onclick="sair_game()">Sair</button>
                </div>
            </div>
        </div>
    </section>
    
</body>
</html>
<!-- <script src="js/pokemon.js"></script> -->
<script>
    var alturaPokemon = 0;
    var getNomePokemon = sessionStorage.getItem('nomePoke');
    var getIdPokemon = sessionStorage.getItem('idPoke');
    var getProbabilidade = sessionStorage.getItem('probabilidade');

   function validar_getPokemon(){
        validar_altura_pokemon();

        if(getNomePokemon == 'Bulbasaur'){
            nomePokemon = getNomePokemon;

        }else if(getNomePokemon == 'Ivysaur'){
            nomePokemon = getNomePokemon;

        }else if(getNomePokemon == 'Venusaur'){
            nomePokemon = getNomePokemon;

        }else if(getNomePokemon == 'Charmander'){
            nomePokemon = getNomePokemon;

        }else if(getNomePokemon == 'Charmeleon'){
            nomePokemon = getNomePokemon;

        }else if(getNomePokemon == 'Charizard'){
            nomePokemon = getNomePokemon;

        }else if(getNomePokemon == 'Squirtle'){
            nomePokemon = getNomePokemon;

        }else if(getNomePokemon == 'Wartortle'){
            nomePokemon = getNomePokemon;

        }else if(getNomePokemon == 'Blastoise'){
            nomePokemon = getNomePokemon;
        }
   }

   function sair_game(){
        sessionStorage.clear('idPoke');
        window.location = 'game.html';
   }

   function validar_altura_pokemon(){
        if(getProbabilidade >= 1 && getProbabilidade < 75){
            alturaPokemon = 40;
        }else if(getProbabilidade >= 75 && getProbabilidade < 90){
            alturaPokemon = 75;
        }else if(getProbabilidade >= 90 && getProbabilidade < 100){
            alturaPokemon = 120;
        }
   }
    
   function animation2(){
    var url_map_static = `url('assets/maps/main_map_catch.png')`;
    var url_map_gif = `url('assets/animation/transition2.gif')`;

    setTimeout(() => {
        status_game.style.display = "none";
        base_game.style.display = "none";
        map_capture.style.backgroundImage = url_map_gif
        audio_battle.innerHTML = `<source src="assets/audio/Battle-Music-pt2.mp3" type="audio/mp3">`;
    }, 100);
    
    setTimeout(() => {
        map_capture.style.backgroundImage = url_map_static;
        status_game.style.display = "flex";
        base_game.style.display = "flex";
        treinador_game.innerHTML = `<img src="../assets/treinador/boy_game.png">`;
        pokemon_game.innerHTML = `<img src="assets/pokemon/capturar/${getNomePokemon}.gif" style="width:${alturaPokemon}%">`;
        p_pokemon.innerHTML = nomePokemon;
    }, 1000);
   }
</script>